\documentclass[12pt]{memoir}

\def\nsemestre {II}
\def\nterm {Fall}
\def\nyear {2022}
\def\nprofesor {Maria Gillespie}
\def\nsigla {MATH501}
\def\nsiglahead {Combinatorics}
\def\nextra {HW3}
\def\nlang {ENG}
\input{../../headerVarillyDiff}

\begin{document}

\begin{Ej}[Exercise 8, Stanley 1.44.a]
    Show that the total number of cycles of all even permutations of $[n]$ and the
    total number of cycles of all odd permutations of $[n]$ differ by $(-1)^n(n-2)!$. Use generating functions.    
\end{Ej}
 
I must start by making a review of group theory which has helped me throughout the solution of this problem.

\begin{Def}
Suppose $\pi$ is a permutation in $S_n$.\par
The \un{order} of a permutation is the amount of times we need to compose it with itself to obtain the identity permutation.\par 
The \un{parity} of a permutation depends on the number of transpositions which compose it. A permutation is \un{even} when it is a product of an \emph{even} number of transpositions. Likewise for odd permutations.\par 
The \un{sign} of a permutation is $1$ when $\pi$ is even. When $\pi$ is odd, the sign is $-1$.
\end{Def}

For example, $\ord((123)=3$ since $(123)(123)(123)=(123)(132)=\id$. Also $(12)(34)$ is an even permutation since it's a product of two transpositions.

\begin{Prop}
For any cycle $c=(x_1x_2\dots x_\l)$, $\ord(c)=\l$ the length of the cycle.\par 
The sign of the cycle $c$ can be computed as $(-1)^{\ord(c)-1}$.\par 
The sign function is \emph{multiplicative}.
\end{Prop}

This is because one can decompose a cycle of order $\l$ can be decomposed into $\l-1$ transpositions.

\begin{Th}
Suppose $\pi\in S_n$ can be decomposed into a product of $k$ cycles, $c_1c_2\dots c_k$. Then the sign of $\pi$ is the product of the signs of $c_i$'s. The following formula holds:\footnote{\textbf{Sam} helped me out when verifying that this formula holds.}
$$\sgn(\pi)=(-1)^{{\sum_{j=1}^k}\ord(c_j)-k}.$$
\end{Th}

This is because
\vspace*{-0.5em}
$$\sgn(\pi)=\sgn(c_1\dots c_k)=\sgn(c_1)\dots\sgn(c_k)=(1)^{\ord(c_1)-1}\dots(-1)^{\ord(c_k)-1}$$
\vspace*{-0.5em}
and by summing up the exponents we obtain the desired formula.

\begin{Rmk}
The formula holds \emph{even when the decomposition includes 1-cycles}. This is because the identity permutation has order 1.\par 
The count of $\sum\ord(c)$ goes up by one, and the $k$ count (amount of cycles) also goes up by one. Therefore parity is preserved.\footnote{This observation is key when recognizing the generating function. \textbf{Ian} was the one who pointed me out the fact that I could use length 1 cycles to fill out some missing spaces.}
\end{Rmk}

With this in hand let us proceed.

\begin{ptcbr}
Let us call $E_n$ to be the amount of cycles across all of the even permutations in $S_n$. Likewise for $O_n$, the number of cycles across odd permutations.\par 
The quantity we are interested in is $D_n=E_n-O_n$. Suppose $\pi=c_1\dots c_k$ is an even permutation, this means that $\pi$ adds $k$ cycles to the count of $E_n$. Likewise if $\pi$ were odd, it adds $k$ cycles to $O_n$.\par 
Since at the end we are subtracting $O_n$ from $E_n$, then we should take into account the sign when adding. This is our first key point.\par 
In general, $\pi$ contributes with $\sgn(\pi)k$ cycles to $D_n$. Counting\footnote{The idea to count across all permutations given their cycle length using the Stirling numbers comes from stackexchange: \ttt{math.se/113202}.} across all the permutations with $k$ cycles we get 
$$D_n=\sum_{k=1}^n\sgn(\pi)kc(n,k)=\sum_{k=1}^n(-1)^{\sum\ord(c_j)-k}kc(n,k)$$
where the $c_j$'s are the decomposition in disjoint cycles of each permutation and $c(n,k)$ is the unsigned Stirling number of the first kind which counts the amount of permutations of $S_n$ with $k$ cycles in their decomposition.\par 
This formula looks \emph{oddly similar} to the Pochammer symbol's generating function 
$$(x)_n=\sum_{k=1}^ns(n,k)x^k$$
evaluated at $x=1$. This is because $s(n,k)=(-1)^{n-k}c(n,k)$.
\end{ptcbr}

We reach a conundrum at this stage because in general $\sum\ord(c_j)\neq n$. For example consider the transposition $(12)$, but in $S_{10^{10}}$. In this case, the sum of the orders is $2$. Because we are only counting the transposition. However $n=10^{10}$, which most definitely is not equal to 2.\par 
\textbf{Ian}'s key observation comes at play here, we can count the $1$-cycles which are being multiplied tacitly to $(12)$. We have $(12)=(12)(3)(4)\dots(10^{10})$. All of this transpositions have order 1, save for the first one. Adding up all of the orders, we do indeed get $10^{10}$! Now, recall that adding the $1$-cycles to our representation does not alter the parity, so the theorem about the parity still holds. 

\begin{ptcb}
    Continuing on with the assumption that we are counting every permutation together with its $1$-cycles, our formula for $D_n$ becomes 
    $$D_n=\sum_{k=1}^n(-1)^{n-k}kc(n,k)=\sum_{k=1}^nks(n,k)$$
    which we recognize as the derivative of the Pochammer symbol's generating function evaluated at $x=1$.\par 
    The derivative in question is precisely
    \begin{align*}
        &\dv{x}\eval_{x=1}(x)_n=\dv{x}\eval_{x=1}\left\lbrack(x)_{n-1}(x-(n-1))\right\rbrack\\
        \To&\dv{x}\eval_{x=1}(x)_n=\left(\dv{x}\eval_{x=1}(x)_{n-1}\right)(x-(n-1))\mid_{x=1}+(x)_{n-1}\mid_{x=1}\\
        \To&D_n=D_{n-1}(2-n)+\dl_{n1}.
    \end{align*}
    This recurrence relation allows us to find $D_n$ given the initial condition that $D_1=1$, because $E_1=1$ (the identity) and $O_1=0$. For $n\geq 1$ we have $\dl_{n1}=0$, so 
    $$D_n=D_{n-1}(2-n)=[D_{n-2}(2-(n-1))](2-n)=D_{n-2}(3-n)(2-n).$$
    Inductively we can see that this quantity is 
    $$D_1\dots(4-n)(3-n)(2-n)=(-1)^{n-2}(n-2)!=(-1)^n(n-2)!$$
    and therefore $E_n-O_n=(-1)^n(n-2)!$ as desired.
\end{ptcb}

\begin{Ej}[Exercise 9, Stanley 1.44.b]
    Give a bijection proof of the previous fact.
\end{Ej}

\begin{ptcbr}
    
\end{ptcbr}
\end{document} 
